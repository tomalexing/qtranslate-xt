(()=>{"use strict";wp.apiFetch.use(((t,e)=>{if(!t.path||"PUT"!==t.method&&"POST"!==t.method)return e(t);const a=wp.data.select("core/editor"),s=wp.data.select("qtranslate-xt"),r=s.getCurrentLanguage(),o=s.getPreviousLanguage();if(!a)return e(t);const n=a.getCurrentPost();if(!n.hasOwnProperty("type"))return e(t);const i=wp.data.select("core").getPostType(n.type);if(!i.hasOwnProperty("rest_base"))return e(t);console.log("QT-XT API: PRE handling method="+t.method,"path="+t.path,"post=",n,"type=",i);const d="/wp/v2/"+i.rest_base+"/"+n.id;return t.path.startsWith(d)&&"PUT"===t.method||t.path.startsWith(d+"/autosaves")&&"POST"===t.method||t.path.startsWith("/wp/v2/settings")&&t.data.title?n.hasOwnProperty("qtx_editor_lang")||r?e({...t,data:{...t.data,wp_id:n.wp_id,qtx_editor_lang:n.qtx_editor_lang??o,switch_qtx_lang:r}}):(console.log("QT-XT API: missing field [qtx_editor_lang] in post id="+n.id),e(t)):e(t)}))})();