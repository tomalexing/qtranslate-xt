(()=>{"use strict";var e={763:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(609),r=n(573);const o=(0,a.createElement)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(r.Path,{d:"M17.5 10h-1.7l-3.7 10.5h1.7l.9-2.6h3.9l.9 2.6h1.7L17.5 10zm-2.2 6.3 1.4-4 1.4 4h-2.8zm-4.8-3.8c1.6-1.8 2.9-3.6 3.7-5.7H16V5.2h-5.8V3H8.8v2.2H3v1.5h9.6c-.7 1.6-1.8 3.1-3.1 4.6C8.6 10.2 7.8 9 7.2 8H5.6c.6 1.4 1.7 2.9 2.9 4.4l-2.4 2.4c-.3.4-.7.8-1.1 1.2l1 1 1.2-1.2c.8-.8 1.6-1.5 2.3-2.3.8.9 1.7 1.7 2.5 2.5l.6-1.5c-.7-.6-1.4-1.3-2.1-2z"}))},534:(e,t,n)=>{n.r(t),n.d(t,{fetchLanguages:()=>o,setCurrentLanguage:()=>r,setLanguages:()=>s});var a=n(236);function r(e){return{type:a.fn,value:e}}function o(){return{type:a.rU}}function s(e){return{type:a.Fz,value:e}}},236:(e,t,n)=>{n.d(t,{Fz:()=>l,I:()=>a,Ke:()=>s,fn:()=>i,rU:()=>c});const a="switch_qtx_lang",r=document.cookie.matchAll(new RegExp(String.raw`${a}=(.[^;])`,"g")).next().value,o=r?r[1]:"en",s={currentLanguage:o??window.QtranslateAjax?.settings.default_language??"en",previousLanguage:o??window.QtranslateAjax?.settings.default_language??"en",languages:{}},i="CURRENT_LANGUAGE",c="FETCH_LANGUAGES",l="SET_LANGUAGES"},55:(e,t,n)=>{n.r(t),n.d(t,{FETCH_LANGUAGES:()=>r});var a=n(333);function r(e){return(0,a.m)().then((e=>!(!e||"object"!=typeof e)&&!(!e.default_language||"object"!=typeof e.language_config)&&e))}},333:(e,t,n)=>{n.d(t,{m:()=>r});const a=window.QtranslateAjax.admin_nonce,r=()=>{let e=new FormData;return e.append("admin_nonce",a),e.append("action","qtranslate_options"),fetch(QtranslateAjax.ajax_url,{method:"POST",body:e}).then((e=>e.text())).then((e=>{const t=JSON.parse(e);return!!t.success&&t.data})).catch((e=>console.log(e)))}},693:(e,t,n)=>{var a=n(143),r=n(534),o=n(7),s=n(55),i=n(286),c=n(717);const l=(0,a.createReduxStore)("qtranslate-xt",{reducer:c.A,actions:r,selectors:o,controls:s,resolvers:i});(0,a.register)(l),(0,a.subscribe)((()=>{}))},717:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(236);function r(e=a.Ke,t){switch(t.type){case a.fn:return{...e,previousLanguage:e.currentLanguage,currentLanguage:t.value};case a.rU:return e;case a.Fz:return{...e,languages:{...t.value.language_config}};default:return e}}},286:(e,t,n)=>{n.r(t),n.d(t,{getLanguages:()=>r});var a=n(534);function*r(){let e=yield a.fetchLanguages();return a.setLanguages(e)}},7:(e,t,n)=>{function a(e){const{currentLanguage:t}=e;return t}function r(e){const{previousLanguage:t}=e;return t}function o(e){const{languages:t}=e;return t}n.r(t),n.d(t,{getCurrentLanguage:()=>a,getLanguages:()=>o,getPreviousLanguage:()=>r})},609:e=>{e.exports=window.React},715:e=>{e.exports=window.wp.blockEditor},997:e=>{e.exports=window.wp.blocks},427:e=>{e.exports=window.wp.components},491:e=>{e.exports=window.wp.compose},582:e=>{e.exports=window.wp.coreData},143:e=>{e.exports=window.wp.data},309:e=>{e.exports=window.wp.editPost},87:e=>{e.exports=window.wp.element},619:e=>{e.exports=window.wp.hooks},723:e=>{e.exports=window.wp.i18n},279:e=>{e.exports=window.wp.plugins},573:e=>{e.exports=window.wp.primitives}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e=n(279),t=n(763),a=n(309),r=n(723),o=n(619),s=n(87),i=n(427),c=n(143),l=(n(582),n(715),n(997)),u=(n(609),n(693),n(491)),g=n(236);(0,o.addAction)("plugins.pluginRegistered","plugin",(function(e,t){console.log(e,t)}),1);const d=(0,u.compose)([(0,c.withSelect)((e=>({getCurrectLanguage:e("qtranslate-xt").getCurrentLanguage(),getLanguagesList:e("qtranslate-xt").getLanguages(),isPreview:e("core/editor").isPreviewingPost(),dirtyEntityRecords:e("core").__experimentalGetDirtyEntityRecords(),siteEdits:e("core").getEntityRecordEdits("root","site"),siteEntityConfig:e("core").getEntityConfig("root","site")}))),(0,c.withDispatch)((e=>({savePost:t=>{e("core/editor").savePost({isPreview:t})}})))])((e=>{const n=wp.editSite?wp.editSite.PluginSidebar:a.PluginSidebar,{getCurrectLanguage:u,getLanguagesList:d,savePost:p,isPreview:w,dirtyEntityRecords:v,siteEntityConfig:m,siteEdits:f}=e,x=(0,s.useMemo)((()=>{const e=v.filter((e=>!("root"===e.kind&&"site"===e.name))),t=m?.meta?.labels??{},n=[];for(const e in f)n.push({kind:"root",name:"site",title:t[e]||e,property:e});return[...e,...n]}),[v,f,m]),h=(0,s.useCallback)((async e=>{(0,c.dispatch)("qtranslate-xt").setCurrentLanguage(e),console.log(v),console.log(x),document.cookie=`${g.I}=${e};path=/`,(0,o.addFilter)("editor.__unstableSavePost","plugin",(function(e,t){(0,o.removeFilter)("editor.__unstableSavePost","plugin");const n=window.wp.data.select("core/editor").getCurrentPost().content,a=(0,l.parse)(n);return wp.data.dispatch("core/editor").resetEditorBlocks(a),e.then((e=>t))})),window.wp.data.dispatch("core/block-editor").__unstableMarkLastChangeAsPersistent(),await window.wp.data.dispatch("core").__experimentalSaveSpecifiedEntityEdits("root","site",void 0,["title"]),await p(w),window.location.reload()}));return React.createElement(React.Fragment,null,React.createElement(n,{className:"qtranstale-post",icon:t.A,name:"qtranstale-post",title:(0,r.__)("Qtranslate XT Blocks","qtranslate")},React.createElement("div",{className:"qt-panel-control"},React.createElement(i.PanelBody,{title:(0,r.__)("Content Language","qtranslate-xt"),initialOpen:!0},React.createElement(i.SelectControl,{label:(0,r.__)("Select language:","qtranslate-xt"),value:u,options:d?Object.entries(d).map((([e,t])=>({label:t.name,value:e}))):[],onChange:h})))))}));(0,e.registerPlugin)("qtranslate-xt-switch",{icon:t.A,render:d})})()})();
//# sourceMappingURL=index.js.map